<div class="container text-center my-3">
  <h2><%= @pot.name.capitalize %>'s Pot</h2>
  <div class="card p-2">
    <h6><%= @pot.description %></h6>
    <% if @pot.days_remaining == 0 %>
    <h3> Today is the Event day </h3>
    <% elsif @pot.days_remaining > 0 %>
    <h6><%= @pot.days_remaining %> Days left </h6>
    <% else %>
    <h3> this event took place on <%= @pot.end_date.strftime("%d %b %Y") %></h3>
    <% end %>
    <h3><strong>€<%= @pot.total_amount/100 %> raised </strong><h3>
  </div>
  <ul class="list-group">
  <% @ordered_gifts.each do |gift| %>
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <span class="badge badge-primary badge-pill">Votes: <%= gift.votes %></span>
    <%= gift.name.capitalize %> - €<%= gift.price %><%= link_to '<i class="fas fa-trash-alt"></i>'.html_safe, gift_path(gift), method: :delete %></i>
  </li>
  <% end %>

</ul>



<div class="container  text-center my-3">
  <h2 class="font-weight-light">Gift Options</h2>
  <div class="col-md-4 col-md-offset-4">
    <% if @pot.gifts.any? %>
      <div id="recipeCarousel" class="carousel slide w-100" data-ride="carousel">
        <div class="carousel-inner w-100" role="listbox">
          <div class="carousel-item active">
            <div class="col-md-4">
              <div class="card card-body">
                <%= @first_gift.name %>
                Votes: <%= @first_gift.votes %>
                <% if current_user.has_voted_in_pot?(@pot) %>
                  <% if current_user.has_voted?(@first_gift) %>
                    <%= link_to "Cancel", downvote_pot_path(@pot, @first_gift), class: "btn btn-primary", method: :post %>
                    <% end %>
                <% else %>
                  <%= link_to "Vote", upvote_pot_path(@pot, @first_gift), class: "btn btn-primary", method: :post %>
                <% end %>
              </div>
            </div>
          </div>
          <% @pot.gifts.offset(1).each do |gift| %>
            <div class="carousel-item" class=>
                <div class="col-md-4">
                    <div class="card card-body">
                      <%= gift.name %>
                      <% if current_user.has_voted_in_pot?(@pot) %>
                        <% if current_user.has_voted?(gift) %>
                          <%= link_to "Cancel", downvote_pot_path(@pot, gift), class: "btn btn-primary", method: :post %>
                        <% end %>
                      <% else %>
                        <%= link_to "Vote", upvote_pot_path(@pot, gift), class: "btn btn-primary", method: :post %>
                      <% end %>
                    </div>
                </div>
            </div>
          <% end %>
          <a class="carousel-control-prev w-auto" href="#recipeCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon bg-dark border border-dark rounded-circle" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next w-auto" href="#recipeCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon bg-dark border border-dark rounded-circle" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
      <%= render 'shared/gift_form' %>
    <% else %>
      <%= render 'shared/gift_form' %>
    <% end %>
  </div>
</div>

<%= link_to "Contribute", new_pot_contribution_path(@pot), class: "btn btn-primary" %>
<%= link_to "Chat", chatroom_path(@pot.chatroom.id), class: "chat-btn" %>


